<!DOCTYPE html>
<meta charset="utf-8">
<body>
  <script src="http://d3js.org/d3.v3.min.js"></script>
  <script src="http://d3js.org/topojson.v1.min.js"></script>
  <!-- I recommend you host this file on your own, since this will change without warning -->
  <script src="http://datamaps.github.io/scripts/datamaps.world.min.js?v=1"></script>
  <h2>Endangered Animals</h2>
  <p><a href="Endangered-Animals.me">Endangered Animals Homepage</a></p>
  <div id="container1" style="position: relative; width: 80%; max-height: 450px;"></div>
 
     
     <script>
      var url_mappings =  {
          AFG : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Afghanistan"
          },
          ALB : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Albania" 
          },
          DZA : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Algeria" 
          },
          AGO : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Angola" 
          },
          ARG : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Argentina" 
          },
          ARM : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Armenia" 
          },
          AUS : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Australia" 
          },
          AUT : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Austria" 
          },
          AZE : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Azerbaijan" 
          },
          BHS : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Bahamas"
          },
          BGD : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Bangladesh" 
          },
          BLR : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Belarus" 
          },
          BEL : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Belgium" 
          },
          BLZ : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Belize" 
          },
          BEN : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Benin" 
          },
          BOL : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Bolivia,%20Plurinational%20States%20of"
          },
          BTN : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Bhutan" 
          },
          BIH : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Bosnia and Herzegovina" 
          },
          BWA : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Botswana" 
          },
          BRA : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Brazil" 
          },
          BGR : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Bulgaria" 
          },
          BFA : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Burkina Faso" 
          },
          BDI : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Burundi" 
          },
          KHM : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Cambodia" 
          },
          CMR : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Cameroon" 
          },
          CAN : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Canada" 
          },
          CAF : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Central African Republic" 
          },
          COG:  {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Congo"
          },
          COD:  {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Congo,%20The%20Democratic%20Republic%20of%20the"
          },
          TCD : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Chad" 
          },
          CHL : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Chile" 
          },
          CHN : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=China" 
          },
          COL : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Colombia" 
          },
          CRI : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Costa Rica" 
          },
          HRV : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Croatia" 
          },
          CUB : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Cuba" 
          },
          CYP : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Cyprus" 
          },
          CZE : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Czech Republic" 
          },
          DNK : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Denmark" 
          },
          DJI : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Djibouti" 
          },
          DOM : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Dominican Republic" 
          },
          ECU : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Ecuador" 
          },
          EGY : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Egypt" 
          },
          SLV : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=El Salvador" 
          },
          GNQ : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Equatorial Guinea" 
          },
          ERI : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Eritrea" 
          },
          EST : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Estonia" 
          },
          ETH : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Ethiopia" 
          },
          FJI : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Fiji" 
          },
          FIN : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Finland" 
          },
          FRA : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=France"
          },
          GUF : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=French Guiana" 
          },
          GAB : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Gabon" 
          },
          GMB : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Gambia" 
          },
          GEO : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Georgia" 
          },
          DEU : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Germany" 
          },
          GHA : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Ghana" 
          },
          GRC : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Greece" 
          },
          GRL : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Greenland" 
          },
          GTM : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Guatemala" 
          },
          GIN : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Guinea" 
          },
          GUY : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Guyana" 
          },
          HTI : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Haiti" 
          },
          HND : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Honduras" 
          },
          HUN : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Hungary" 
          },
          ISL : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Iceland" 
          },
          IND : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=India" 
          },
          IDN : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Indonesia" 
          },
          IRN : {
            country_url: "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Iran,%20Islamic%20Republic%20of"
          },
          IRQ : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Iraq" 
          },
          IRL : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Ireland" 
          },
          ISR : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Israel" 
          },
          ITA : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Italy" 
          },
          JAM : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Jamaica" 
          },
          JPN : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Japan" 
          },
          JOR : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Jordan" 
          },
          KAZ : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Kazakhstan" 
          },
          KEN : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Kenya" 
          },
          KOR : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Korea,%20Republic%20of"
          },
          PRK : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Korea,%20Democratic%20People%27s%20Republic%20of"
          },
          KWT : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Kuwait" 
          },
          KGZ : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Kyrgyzstan" 
          },
          LAO:  {
            country_url: "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Lao%20People%27s%20Democratic%20Republic" 
          },
          LVA : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Latvia" 
          },
          LBN : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Lebanon" 
          },
          LSO : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Lesotho" 
          },
          LBR : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Liberia" 
          },
          LBY : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Libya" 
          },
          LTU : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Lithuania" 
          },
          LUX : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Luxembourg" 
          },
          MDG : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Madagascar" 
          },
          MWI : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Malawi" 
          },
          MYS : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Malaysia" 
          },
          MKD : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Macedonia,%20the%20former%20Yugoslav%20Republic%20of"
          },
          MLI : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Mali" 
          },
          MRT : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Mauritania" 
          },
          MEX : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Mexico" 
          },
          MDA : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Moldova" 
          },
          MNG : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Mongolia" 
          },
          MNE : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Montenegro" 
          },
          MAR : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Morocco" 
          },
          MOZ : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Mozambique" 
          },
          MMR : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Myanmar" 
          },
          NAM : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Namibia" 
          },
          NPL : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Nepal" 
          },
          NLD : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Netherlands" 
          },
          NCL : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=New Caledonia" 
          },
          NZL : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=New Zealand" 
          },
          NIC : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Nicaragua" 
          },
          NER : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Niger" 
          },
          NGA : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Nigeria" 
          },
          NOR : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Norway" 
          },
          OMN : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Oman" 
          },
          PAK : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Pakistan" 
          },
          PAN : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Panama" 
          },
          PNG : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Papua New Guinea" 
          },
          PRY : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Paraguay" 
          },
          PER : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Peru" 
          },
          PHL : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Philippines" 
          },
          POL : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Poland" 
          },
          PRT : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Portugal" 
          },
          PRI : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Puerto Rico" 
          },
          QAT : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Qatar" 
          },
          ROU : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Romania" 
          },
          RUS: {
            country_url: "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Russian%20Federation"
          },
          RWA : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Rwanda" 
          },
          SAU : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Saudi Arabia" 
          },
          SEN : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Senegal" 
          },
          SLE : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Sierra Leone" 
          },
          SVK : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Slovakia" 
          },
          SVN : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Slovenia" 
          },
          SLB : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Solomon Islands" 
          },
          SOM : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Somalia" 
          },
          ZAF : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=South Africa" 
          },
          SSD : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=South Sudan" 
          },
          ESP : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Spain"
          },
          LKA : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Sri Lanka" 
          },
          SDN : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Sudan" 
          },
          SRB : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Serbia"
          },
          SWZ : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Swaziland" 
          },
          SWE : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Sweden" 
          },
          CHE : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Switzerland" 
          },
          TJK : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Tajikistan" 
          },
          THA : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Thailand" 
          },
          TGO : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Togo" 
          },
          TTO : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Trinidad and Tobago" 
          },
          TUN : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Tunisia" 
          },
          TUR : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Turkey" 
          },
          TKM : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Turkmenistan" 
          },
          UGA : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Uganda" 
          },
          UKR : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Ukraine" 
          },
          ARE : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=United Arab Emirates" 
          },
          GBR : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=United Kingdom" 
          },
          URY : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Uruguay" 
          },
          UZB : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Uzbekistan" 
          },
          VNM : {
            country_url: "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Viet%20Nam"
          },
          VEN : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Venezuela,%20Bolivarian%20Republic%20of"
          },
          VUT : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Vanuatu" 
          },
          ESH : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Western Sahara" 
          },
          YEM : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Yemen" 
          },
          ZMB : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Zambia" 
          },
          ZWE : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=Zimbabwe" 
          },
          USA : {
            country_url:  "https://swe-endangered-animals.appspot.com/single_country_data/?country_name=United%20States"
          }
        }
      var map = new Datamap({
        scope: 'world',
        element: document.getElementById('container1'),
        projection: 'mercator',
        height: 1000,
        fills: {
          defaultFill: '4ba50e',
          lt50: 'rgba(0,244,244,0.9)',
          gt50: 'red'
        },
        geographyConfig: {
      		popupOnHover:true,
      		highlightOnHover: true,
      		popupTemplate: function(geo, data) {
                  return ['<div class="hoverinfo"><strong>',
                            geo.properties.name,
                          '</strong></div>'].join('');
          }
  		  },
        done: function(datamap) {
            datamap.svg.selectAll('.datamaps-subunit').on('click', function(geography) {
                console.log("click detected!")
                var country_code = geography.id;
                // console.log(country_code)
                var url = url_mappings[country_code].country_url
                httpGetAsync(url, formatData);
    
                // alert([geography.properties.name, out].join(''));
            });
        }

      })


      function httpGetAsync(theUrl, callback)
      {
          var xmlHttp = new XMLHttpRequest();
          xmlHttp.onreadystatechange = function() {
              // console.log(xmlHttp.readyState);
              if (xmlHttp.readyState == 4 && xmlHttp.status == 200)
              {
                  callback(xmlHttp.responseText); 
              }
          };

          xmlHttp.open("GET", theUrl, true); // true for asynchronous 
          xmlHttp.send();
          
      }

      function formatData(data)
      {
        // console.log(data);
        var obj = JSON.parse(data);
        var output = "";
        for( i = 0; i < obj.assoc_animals.length; i++ )
        {
          output = output + (obj.assoc_animals[i] + (obj.assoc_animals.length > 1 ? ", " : ""));
        }
        

        alert([output].join(''));
      }
     

     </script>
</body>